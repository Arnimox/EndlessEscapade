<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">
    <Import Project="..\tModLoader.targets" />

    <PropertyGroup>
        <TargetFramework>net6.0</TargetFramework>
        <PlatformTarget>AnyCPU</PlatformTarget>
        <LangVersion>latest</LangVersion>
        <PackageId>EndlessEscapade</PackageId>
    </PropertyGroup>

    <PropertyGroup>
        <BuildToolsAssemblyFile>lib\TerrariaOverhaul.BuildTools.dll</BuildToolsAssemblyFile>
    </PropertyGroup>
    
    <ItemGroup>
        <PackageReference Include="tModLoader.CodeAssist" Version="0.1.*" />
    </ItemGroup>
    
    <ItemGroup>
        <LocalizationFiles Include="Localization\*.hjson" />
    </ItemGroup>

    <UsingTask TaskName="UpdateLocalizationFiles" AssemblyFile="$(BuildToolsAssemblyFile)" />

    <Target Name="UpdateLocalizationFiles" BeforeTargets="BeforeCompile">
        <Message Text="Updating localization files..." Importance="high" />
        <UpdateLocalizationFiles ResultsOutputPath="Localization\README.md" MainFile="Localization\en-US.hjson" LocalizationFiles="@(LocalizationFiles)" />
    </Target>
</Project>